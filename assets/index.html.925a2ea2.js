import{_ as a,c as e}from"./app.9fd9aa02.js";const s={},n=e(`<h1 id="\u7B80\u5355\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u7B80\u5355\u4ECB\u7ECD" aria-hidden="true">#</a> \u7B80\u5355\u4ECB\u7ECD</h1><h2 id="\u4EC0\u4E48\u662Fjitwatch" tabindex="-1"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fjitwatch" aria-hidden="true">#</a> \u4EC0\u4E48\u662FJITWatch\uFF1F</h2><blockquote><p>\u4EC0\u4E48\u662FJITWatch\uFF1F</p></blockquote><p>\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u901A\u8FC7\u8BF8\u5982<code>javap</code>\u7B49\u53CD\u7F16\u8BD1\u5DE5\u5177\u6765\u67E5\u770B\u6E90\u7801\u7684\u5B57\u8282\u7801\u5DF2\u7ECF\u80FD\u591F\u6EE1\u8DB3\u6211\u4EEC\u7684\u65E5\u5E38\u9700\u6C42\u3002</p><p>\u4F46\u662F\u4E0D\u6392\u9664\u5728\u6709\u4E9B\u7279\u5B9A\u573A\u666F\u4E0B\uFF0C\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u53CD\u6C47\u7F16\u6765\u67E5\u770B\u76F8\u5E94\u7684\u6C47\u7F16\u6307\u4EE4\u3002</p><p><code>JITWatch</code>\u2014\u2014<code>JIT</code>\u7F16\u8BD1\u65E5\u5FD7\u5206\u6790\u5DE5\u5177 \u63D0\u4F9B\u4E86\u53EF\u89C6\u5316\u754C\u9762\u5E2E\u52A9\u6211\u4EEC\u76F4\u89C2\u7684\u67E5\u8BE2\u6C47\u7F16\u4EE3\u7801\u3002</p><h2 id="\u5B57\u8282\u7801\u6307\u4EE4\u548C\u6C47\u7F16\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u5B57\u8282\u7801\u6307\u4EE4\u548C\u6C47\u7F16\u6307\u4EE4" aria-hidden="true">#</a> \u5B57\u8282\u7801\u6307\u4EE4\u548C\u6C47\u7F16\u6307\u4EE4</h2><blockquote><p>\u5B57\u8282\u7801\u6307\u4EE4\u548C\u6C47\u7F16\u6307\u4EE4\u533A\u522B</p></blockquote><p>Java\u6211\u4EEC\u77E5\u9053\u662F\u4E00\u79CD\u8DE8\u5E73\u53F0\u8BED\u8A00\uFF0C\u90A3\u4E48Java\u5982\u4F55\u5B9E\u73B0\u5E73\u53F0\u65E0\u5173\u6027\u5462\uFF1F\u8FD9\u5C31\u9700\u8981\u6211\u4EEC\u4E86\u89E3<code>JVM</code>\u548CJava\u7684\u5B57\u8282\u7801\u6587\u4EF6\u3002</p><p>\u8FD9\u91CC\u6211\u4EEC\u9700\u8981\u6709\u4E00\u70B9\u5171\u8BC6\uFF0C\u5C31\u662F<strong>\u4EFB\u4F55\u4E00\u95E8\u7F16\u7A0B\u8BED\u8A00\u90FD\u9700\u8981\u8F6C\u6362\u4E3A\u4E0E\u5E73\u53F0\u76F8\u5173\u7684\u6C47\u7F16\u6307\u4EE4\u624D\u80FD\u591F\u6700\u7EC8\u88AB\u786C\u4EF6\u6267\u884C</strong>\uFF0C\u6BD4\u5982C\u548CC++\u90FD\u5C06\u6211\u4EEC\u7684\u6E90\u4EE3\u7801\u76F4\u63A5\u7F16\u8BD1\u6210\u4E0ECPU\u76F8\u5173\u7684\u6C47\u7F16\u6307\u4EE4\u7ED9CPU\u6267\u884C\u3002</p><p><strong>\u4E0D\u540C\u7CFB\u5217\u7684CPU\u7684\u4F53\u7CFB\u67B6\u6784\u4E0D\u540C\uFF0C\u6240\u4EE5\u5B83\u4EEC\u7684\u6C47\u7F16\u6307\u4EE4\u4E5F\u6709\u4E0D\u540C</strong>\uFF0C\u6BD4\u5982<code>X86</code>\u67B6\u6784\u7684<code>CPU</code>\u5BF9\u5E94\u4E8E<code>X86</code>\u6C47\u7F16\u6307\u4EE4\uFF0C<code>arm</code>\u67B6\u6784\u7684CPU\u5BF9\u5E94\u4E8E<code>arm</code>\u6C47\u7F16\u6307\u4EE4\u3002</p><p>\u5982\u679C\u5C06\u7A0B\u5E8F\u6E90\u4EE3\u7801\u76F4\u63A5\u7F16\u8BD1\u6210\u4E0E\u786C\u4EF6\u76F8\u5173\u7684\u5E95\u5C42\u6C47\u7F16\u6307\u4EE4\uFF0C\u90A3\u4E48\u7A0B\u5E8F\u7684\u8DE8\u5E73\u53F0\u6027\u4E5F\u5C31\u5927\u6253\u6298\u6263\uFF0C\u4F46\u6267\u884C\u6027\u80FD\u76F8\u5BF9\u8F83\u9AD8\u3002</p><p>\u4E3A\u4E86\u5B9E\u73B0\u5E73\u53F0\u65E0\u5173\u6027\uFF0CJava\u7684\u7F16\u8BD1\u5668<code>javac</code>\u5E76\u4E0D\u662F\u5C06Java\u7684\u6E90\u7A0B\u5E8F\u76F4\u63A5\u7F16\u8BD1\u6210\u4E0E\u5E73\u53F0\u76F8\u5173\u7684\u6C47\u7F16\u6307\u4EE4\uFF0C\u800C\u662F\u7F16\u8BD1\u6210\u4E00\u79CD\u4E2D\u95F4\u8BED\u8A00\uFF0C\u5373Java\u7684class\u5B57\u8282\u7801\u6587\u4EF6\u3002\u5B57\u8282\u7801\u6587\u4EF6\uFF0C\u987E\u540D\u601D\u4E49\u5B58\u7684\u5C31\u662F\u5B57\u8282\u7801\uFF0C\u5373\u4E00\u4E2A\u4E00\u4E2A\u7684\u5B57\u8282\u3002</p><blockquote><p>Java\u6E90\u7801\u7F16\u8BD1\u540E\u7684\u5B57\u8282\u7801\u6587\u4EF6\u662F\u4E0D\u80FD\u591F\u76F4\u63A5\u88ABCPU\u6267\u884C\u7684\uFF0C\u90A3\u4E48\u8BE5\u5982\u4F55\u6267\u884C\u5462\uFF1F</p></blockquote><p>\u7B54\u6848\u662F<code>JVM</code>\uFF0C\u4E3A\u4E86\u8BA9Java\u7A0B\u5E8F\u80FD\u591F\u5728\u4E0D\u540C\u7684\u5E73\u53F0\u4E0A\u6267\u884C\uFF0CJava\u5B98\u65B9\u63D0\u4F9B\u4E86\u9488\u5BF9\u4E8E\u5404\u4E2A\u5E73\u53F0\u7684Java\u865A\u62DF\u673A\u3002</p><p><code>JVM</code>\u8FD0\u884C\u4E8E\u786C\u4EF6\u5C42\u4E4B\u4E0A\uFF0C\u5C4F\u853D\u5404\u79CD\u5E73\u53F0\u7684\u5DEE\u5F02\u6027\u3002</p><p><code>javac</code>\u7F16\u8BD1\u540E\u7684<strong>\u5B57\u8282\u7801\u6587\u4EF6\u7EDF\u4E00\u7531<code>JVM</code>\u6765\u52A0\u8F7D</strong>\uFF0C<strong>\u6700\u540E\u518D\u8F6C\u5316\u6210\u4E0E\u786C\u4EF6\u76F8\u5173\u7684\u673A\u5668\u6307\u4EE4\u88ABCPU\u6267\u884C\u3002</strong></p><p>\u77E5\u9053\u4E86\u901A\u8FC7<code>JVM</code>\u6765\u52A0\u8F7D\u5B57\u8282\u7801\u6587\u4EF6\uFF0C\u90A3\u4E48\u8FD8\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u5C31\u662F<code>JVM</code>\u5982\u4F55\u5C06\u5B57\u8282\u7801\u4E2D\u7684\u6BCF\u4E2A\u5B57\u8282\u548C\u6211\u4EEC\u5199\u7684Java\u6E90\u4EE3\u7801\u76F8\u5173\u8054\uFF0C\u4E5F\u5C31\u662F<code>JVM</code>\u5982\u4F55\u77E5\u9053\u6211\u4EEC\u5199\u7684Java\u6E90\u4EE3\u7801\u5BF9\u5E94\u4E8EClass\u6587\u4EF6\u4E2D\u7684\u54EA\u6BB5\u5341\u516D\u8FDB\u5236\uFF0C\u8FD9\u6BB5\u5341\u516D\u8FDB\u5236\u662F\u5E72\u4EC0\u4E48\u7684\uFF0C\u6267\u884C\u4E86\u4EC0\u4E48\u529F\u80FD\uFF1F</p><p>\u6240\u4EE5\u8FD9\u5C31\u9700\u8981\u5B9A\u4E49\u4E00\u4E2A<code>JVM</code>\u5C42\u9762\u7684\u89C4\u8303\uFF0C\u5728<code>JVM</code>\u5C42\u9762\u62BD\u8C61\u51FA\u4E00\u4E9B\u6211\u4EEC\u80FD\u591F\u8BA4\u8BC6\u7684\u6307\u4EE4\u52A9\u8BB0\u7B26\uFF0C\u8FD9\u4E9B\u6307\u4EE4\u52A9\u8BB0\u7B26\u5C31\u662FJava\u7684\u5B57\u8282\u7801\u6307\u4EE4\u3002</p><blockquote><p>\u5B57\u8282\u7801\u6587\u4EF6\u4E3A\u4EC0\u4E48\u5B58\u50A8\u5341\u516D\u8FDB\u5236\uFF1F</p></blockquote><p>\u5B57\u8282\u7801\u6587\u4EF6\u91CC\u9762\u5B58\u7684\u5E76\u4E0D\u662F\u4E8C\u8FDB\u5236\uFF0C\u800C\u662F\u5341\u516D\u8FDB\u5236\uFF0C\u8FD9\u662F\u56E0\u4E3A\u4E8C\u8FDB\u5236\u592A\u957F\u4E86\uFF0C\u4E00\u4E2A\u5B57\u8282\u8981\u75318\u4F4D\u4E8C\u8FDB\u5236\u7EC4\u6210\u3002\u6240\u4EE5\u7528\u5341\u516D\u8FDB\u5236\u6807\u8868\u793A\uFF0C\u4E24\u4E2A\u5341\u516D\u8FDB\u5236\u5C31\u53EF\u4EE5\u8868\u793A\u4E00\u4E2A\u5B57\u8282\u3002</p><h1 id="\u5B89\u88C5\u6267\u884C\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u6267\u884C\u6B65\u9AA4" aria-hidden="true">#</a> \u5B89\u88C5\u6267\u884C\u6B65\u9AA4</h1><h2 id="\u4E0B\u8F7D\u5E76\u6267\u884Cjitwatch" tabindex="-1"><a class="header-anchor" href="#\u4E0B\u8F7D\u5E76\u6267\u884Cjitwatch" aria-hidden="true">#</a> \u4E0B\u8F7D\u5E76\u6267\u884CJITWatch</h2><blockquote><p>\u4E0B\u8F7DJITWatch</p></blockquote><p>\u9996\u5148\u53BB\u5230JITWatch\u7684\u5B98\u65B9\u5F00\u6E90\u4ED3\u5E93\uFF1Ahttps://github.com/AdoptOpenJDK/jitwatch</p><p>\u9009\u62E9\u9700\u8981\u4E0B\u8F7D\u7684\u7248\u672C\uFF0C\u8FD9\u91CC\u5EFA\u8BAE\u4F7F\u75281.4.2\u7248\u672C\uFF0C1.4.2+\u7248\u672C\u7684\u4F1A\u51FA\u73B0\u4E71\u7801\u95EE\u9898\u3002</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106125602841.png" alt="image-20221106125602841"></p><blockquote><p>\u6267\u884CJITWatch</p></blockquote><p>\u6839\u636E\u81EA\u5DF1\u7684\u64CD\u4F5C\u7CFB\u7EDF\u9009\u62E9\u5E76\u89E3\u538B\u540E\uFF0C\u8FDB\u5165\u5230\u9879\u76EE\u4E3B\u76EE\u5F55\uFF0C\u4F7F\u7528<code>maven</code>\u547D\u4EE4\u542F\u52A8\u9879\u76EE</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mvn clean compile exec:java
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u8FD9\u91CC\u51FA\u73B0\u62A5\u9519<code>\u9519\u8BEF: \u627E\u4E0D\u5230\u6216\u65E0\u6CD5\u52A0\u8F7D\u4E3B\u7C7B org.adoptopenjdk.jitwatch.launch.LaunchUI</code>\uFF0C\u8BF4\u660E\u4F60\u7684JDK\u6CA1\u6709\u81EA\u5E26<code>JavaFX</code>\u5305\u3002</p><p>\u8FD9\u91CC\u6211\u7684\u5EFA\u8BAE\u662F\u4E0B\u8F7D\u81EA\u5E26<code>JavaFX</code>\u7684JDK\u5982<code>Oracle JDK 11+</code></p><p>\u5728\u89E3\u51B3\u5B8C\u95EE\u9898\u547D\u4EE4\u6267\u884C\u6210\u529F\u540E\u4F1A\u5F39\u51FAJITWatch\u7684GUI\u754C\u9762\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106130433158.png" alt="image-20221106130433158"></p><h2 id="\u5FEB\u901F\u8FD0\u884Cjitwatch" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u901F\u8FD0\u884Cjitwatch" aria-hidden="true">#</a> \u5FEB\u901F\u8FD0\u884CJITWatch</h2><blockquote><p>\u6309\u7167\u987A\u5E8F\u8BD5\u8FD0\u884C\u89E3\u6790\u9ED8\u8BA4\u4EE3\u7801</p></blockquote><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106130552847.png" alt="image-20221106130552847"></p><p>\u6211\u4EEC\u6309\u7167\u4E0A\u56FE\u7684\u987A\u5E8F\u4F9D\u6B21\u70B9\u51FB<code>Sandbox-&gt; Configure Sandbox</code>\uFF0C\u9009\u62E9\u6C47\u7F16\u8BED\u8A00\u3002</p><blockquote><p>\u8FD9\u91CC\u6B63\u5E38\u6765\u8BF4\u8FD9\u4E00\u6B65\u6211\u4EEC\u7684Show Disassembly\u9009\u9879\u662F\u4E0D\u53EF\u9009\u4E2D\u7684\u3002\u8FD9\u5C06\u4F1A\u5BFC\u81F4\u6211\u4EEC\u63A5\u4E0B\u6765\u6267\u884CRun\u7684\u65F6\u5019\u5F39\u51FA\u6846\u7684\u53F3\u680F\u4E0D\u663E\u793A\u4E1C\u897F\u3002</p><p>\u8FD9\u4E2A\u95EE\u9898\u6211\u4F1A\u5E26\u7740\u5927\u5BB6\u5728\u4E0B\u9762\u89E3\u51B3\u3002</p></blockquote><p>\u6211\u4EEC\u70B9\u51FBRun\u6309\u94AE\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106131122181.png" alt="image-20221106131122181"></p><p>\u5F39\u51FA\u4E86\u4EE3\u7801\u7684\u5206\u6790\u754C\u9762\uFF0C\u5206\u4E3A\u5DE6\u4E2D\u53F3\u4E09\u680F\uFF0C\u5DE6\u8FB9\u4E3AJava\u6E90\u7801\uFF0C\u4E2D\u95F4\u4E3AJava\u5B57\u8282\u7801\uFF0C\u53F3\u8FB9\u4E3AJIT\u540E\u7684\u6C47\u7F16\u7801\uFF0C\u5982\u679C\u8FDB\u884C\u591A\u6B21JIT\u7F16\u8BD1\uFF0C\u8FD8\u80FD\u5206\u522B\u67E5\u770B\u7F16\u8BD1\u7ED3\u679C\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106134448341.png" alt="image-20221106134448341"></p><p>\u4F46\u662F\u6B63\u5982\u6211\u4EEC\u4E0A\u9762\u6240\u8BF4\u8FD9\u91CC\u7684Assembly\u680F\u5927\u6982\u7387\u4E0D\u4F1A\u51FA\u73B0\u5185\u5BB9\uFF08\u53C2\u8003\u8FD9\u4E2A\u63D0\u95EE\uFF1Ahttps://stackoverflow.com/questions/43066522/jitwatch-assembly-code-generation/74333014#74333014\uFF09</p><p>\u5982\u679C\u9700\u8981\u51FA\u73B0\u5185\u5BB9\u5728\u8FD9\u4E00\u6B65\u7684\u9009\u9879\u9700\u8981\u80FD\u591F\u88AB\u9009\u4E2D\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106134123039.png" alt="image-20221106134123039"></p><p>\u5927\u81F4\u610F\u601D\u662F\uFF1A\u8FD9\u662F JITWatch \u4E0E FCML \u53CD\u6C47\u7F16\u7A0B\u5E8F\u4E00\u8D77\u4F7F\u7528\u65F6\u51FA\u73B0\u7684\u9519\u8BEF\u3002</p><p>\u5728\u7F51\u4E0A\u67E5\u9605\u5927\u91CF\u8D44\u6599\u544A\u77E5\u9700\u8981<code>hsdis</code>\u3002\u5982\u679C\u6CA1\u6709\u8FD9\u4E2A\u4E1C\u897F\uFF0C\u76F4\u63A5\u8FD0\u884C\u4EE3\u7801\u52A0\u4E0A\u5982\u4E0B\u865A\u62DF\u673A\u53C2\u6570\u540E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token parameter variable">-XX:+UnlockDiagnosticVMOptions</span> <span class="token parameter variable">-XX:+PrintAssembly</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4F1A\u5F97\u5230\u5982\u4E0B\u63D0\u793A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Java HotSpot<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span>-Bit Server VM warning: PrintAssembly is enabled<span class="token punctuation">;</span> turning on DebugNonSafepoints to gain additional output Could not load hsdis-amd64.dll<span class="token punctuation">;</span> library not loadable<span class="token punctuation">;</span> PrintAssembly is disabled
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E8E\u662F\u63A5\u4E0B\u6765\u6211\u4EEC\u5C31\u6765\u5B89\u88C5<code>HSDIS</code></p><h2 id="\u83B7\u53D6hsdis\u5E76\u6B63\u786E\u6267\u884Cjitwatch" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6hsdis\u5E76\u6B63\u786E\u6267\u884Cjitwatch" aria-hidden="true">#</a> \u83B7\u53D6hsdis\u5E76\u6B63\u786E\u6267\u884CJITWatch</h2><blockquote><p>\u4EC0\u4E48\u662FHSDIS?</p></blockquote><p><code>HSDIS</code>\u662F<code>HotSpot disassembler</code>\u7684\u7F29\u5199\uFF0C\u8981\u4F7F\u7528<code>HSDIS</code>\u9700\u8981\u4E0B\u8F7D<code>hsdis-amd64.dylib</code></p><blockquote><p>\u4E0B\u8F7D\u51C6\u5907</p></blockquote><ul><li><a href="https://cygwin.com/install.html" target="_blank" rel="noopener noreferrer">\u4E0B\u8F7DCygwin\u5B89\u88C5\u5305\uFF08Win64\uFF09</a></li><li><a href="http://ftpmirror.gnu.org/binutils/" target="_blank" rel="noopener noreferrer">\u4E0B\u8F7DGNU binutils</a></li><li><a href="https://github.com/AdoptOpenJDK/openjdk-jdk11u" target="_blank" rel="noopener noreferrer">\u4E0B\u8F7DOpenJDK\u6E90\u7801</a></li></ul><blockquote><p>\u5B89\u88C5Cygwin</p></blockquote><p>\u955C\u50CF\u4F7F\u7528\u7F51\u6613\u7684\uFF0Chttp://mirrors.163.com/\uFF0C\u901F\u5EA6\u8FD8\u7B97\u884C</p><p>\u7136\u540E\u518DSelect Packages\u9875\u9762\u9700\u8981\u6CE8\u610F\uFF0C\u5728\u9ED8\u8BA4\u7684\u57FA\u7840\u4E0A\uFF0C\u9700\u8981\u989D\u5916\u5B89\u88C5\u7684package\u6709\uFF1A</p><ul><li><strong>Devel - make</strong></li><li><strong>Devel - gcc-core</strong></li><li><strong>Devel - mingw64-x86_64-gcc-core</strong></li><li><strong>Devel - texinfo</strong></li><li><strong>Utils - diffutils</strong></li></ul><p>\u5B89\u88C5\u5B8C\u4E4B\u540E\u542F\u52A8Cygwin\uFF0C\u5219\u4F1A\u5728Cygwin\u7684\u5B89\u88C5\u76EE\u5F55\u4E0B\u7684<code>home</code>\u4E0B\u81EA\u52A8\u751F\u6210\u4F60\u7684\u7528\u6237\u540D\u547D\u540D\u7684\u6587\u4EF6\u5939\uFF08\u4E0B\u6587\u8BB0\u4E4B\u4E3A<code>~</code>\uFF09</p><blockquote><p>\u6D4B\u8BD5Cygwin</p></blockquote><p>\u8FD0\u884CCygwin\uFF0C\u5728\u5F39\u51FA\u7684\u547D\u4EE4\u884C\u7A97\u53E3\u8F93\u5165\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cygcheck <span class="token parameter variable">-c</span> cygwin
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4F1A\u6253\u5370\u51FA\u5F53\u524DCygwin\u7684\u7248\u672C\u548C\u8FD0\u884C\u72B6\u6001\uFF0C\u5982\u679Cstatus\u662Fok\u7684\u8BDD\uFF0C\u5219Cygwin\u8FD0\u884C\u6B63\u5E38\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Cygwin Package Information
Package              Version        Status
cygwin               <span class="token number">3.3</span>.6-1        OK
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u63A5\u7740\u53EF\u4EE5\u6D4B\u8BD5\u4E00\u4E9B\u57FA\u672C\u73AF\u5883\u662F\u5426\u6210\u529F\u5B89\u88C5\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>g++ <span class="token parameter variable">--version</span>
<span class="token function">make</span> \u2013version
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>\u51C6\u5907binutils\u548Chsdis</p></blockquote><p>\u5C06\u4E0B\u8F7D\u7684binutils\u89E3\u538B\u5230~\u4E0B <code>.../home/\u7528\u6237\u540D/binutils-2.27/</code> \u5C06\u4E0B\u8F7D\u7684openJDK\u6E90\u7801/src/share/tools/hsdis\u89E3\u538B\u5230~\u4E0B <code>.../home/\u7528\u6237\u540D/hsdis/</code> \u4FEE\u6539~/hsdis/Makefile\u6587\u4EF6\uFF0C\u641C\u7D22LIBRARIES\uFF0C\u5C06</p><div class="language-makefile ext-makefile line-numbers-mode"><pre class="language-makefile"><code>LIBRARIES <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/bfd/libbfd.a \\ <span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/opcodes/libopcodes.a \\ <span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/libiberty/libiberty.a
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4FEE\u6539\u4E3A\uFF1A</p><div class="language-makefile ext-makefile line-numbers-mode"><pre class="language-makefile"><code>LIBRARIES <span class="token operator">=</span> <span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/bfd/libbfd.a \\ <span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/zlib/libz.a \\ <span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/opcodes/libopcodes.a \\ 
<span class="token variable">$</span><span class="token punctuation">(</span>TARGET_DIR<span class="token punctuation">)</span>/libiberty/libiberty.a
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4FDD\u5B58\uFF0C\u5E76\u4E14\u5728Cygwin\u7A97\u53E3\u8F93\u5165\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/hsdis
<span class="token function">make</span> <span class="token assign-left variable">OS</span><span class="token operator">=</span>Linux <span class="token assign-left variable">MINGW</span><span class="token operator">=</span>x86_64-w64-mingw32 <span class="token string">&#39;AR=$(MINGW)-ar&#39;</span> <span class="token assign-left variable">BINUTILS</span><span class="token operator">=~</span>/binutils-2.27 <span class="token comment">#\uFF08\u6700\u540E\u7684binutils\u8DEF\u5F84\u9700\u8981\u4E0E\u5B9E\u9645\u5B89\u88C5\u8DEF\u5F84\u4E00\u81F4\uFF09</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u7B49\u5F85\u51E0\u5206\u949F\uFF0C\u5982\u679C\u6700\u540E\u6CA1\u6709\u62A5\u9519\uFF0C\u90A3\u4E48\u5C31build\u6210\u529F\u4E86\uFF0C\u6211\u4EEC\u9700\u8981\u7684<code>hsdis-amd64.dll</code>\u73B0\u5728\u5C31\u5728<code>~/hsdis/build/Linux-amd64</code>\u91CC\u9762\u4E86\uFF0C\u628A\u5B83copy\u5230<code>$JAVA_HOME\\bin\\server</code>\u4E0B\u3002</p><blockquote><p>\u91CD\u65B0\u8FD0\u884CJITWatch</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mvn clean compile exec:java
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u4E2A\u65F6\u5019\u5F39\u51FA\u7684JITWatch\u754C\u9762\u7684<code>Show Disassembly</code>\u9009\u9879\u5C31\u662F\u53EF\u9009\u4E2D\u7684\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106134326459.png" alt="image-20221106134326459"></p><p>\u5E76\u4E14\u53EF\u4EE5\u6210\u529F\u7684\u8FD0\u884C\u89E3\u6790\u4EE3\u7801\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106134546457.png" alt="image-20221106134546457"></p><h1 id="jitwatch\u89E3\u6790\u672C\u5730java\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#jitwatch\u89E3\u6790\u672C\u5730java\u4EE3\u7801" aria-hidden="true">#</a> JITWatch\u89E3\u6790\u672C\u5730Java\u4EE3\u7801</h1><blockquote><p>\u6DFB\u52A0\u865A\u62DF\u673A\u53C2\u6570\uFF0C\u8F93\u51FA\u65E5\u5FD7\u6587\u4EF6</p></blockquote><p>\u6211\u4EEC\u5148\u5728idea\u4E2D\u7ED9\u60F3\u8981\u89E3\u6790\u7684Class\u914D\u7F6E\u865A\u62DF\u673A\u53C2\u6570\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token parameter variable">-Xcomp</span>
<span class="token parameter variable">-XX:+UnlockDiagnosticVMOptions</span>
<span class="token parameter variable">-XX:+PrintAssembly</span>
<span class="token parameter variable">-XX:+LogCompilation</span>
<span class="token parameter variable">-XX:LogFile</span><span class="token operator">=</span>jit.log
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106212608201.png" alt="image-20221106212608201"></p><p>\u8FD0\u884CIDEA\u540E\uFF0C\u6C47\u7F16\u4EE3\u7801\u4E0D\u4EC5\u6253\u5370\u8F93\u51FA\u5230\u7EC8\u7AEF\uFF0C\u8FD8\u4F1A\u751F\u6210\u6211\u4EEC\u6240\u9700\u7684\u65E5\u5FD7\u6587\u4EF6\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106212844461.png" alt="image-20221106212844461"></p><blockquote><p>\u7528JITWatch\u8FDB\u884C\u53EF\u89C6\u5316\u5206\u6790</p></blockquote><p>\u9996\u5148\u70B9\u51FB <strong>Config</strong> \u6309\u94AE\u6765\u8BBE\u7F6EJava\u6E90\u7801\u6587\u4EF6\u3001Class\u5B57\u8282\u7801\u6587\u4EF6\u6240\u5728\u8DEF\u5F84\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213013115.png" alt="image-20221106213013115"></p><p>\u7136\u540E\u70B9\u51FB <strong>Open Log</strong> \u6765\u5BFC\u5165\u6211\u4EEC\u521A\u521A\u751F\u6210\u7684\u65E5\u5FD7\u6587\u4EF6\uFF0C\u7136\u540E\u70B9\u51FB <strong>Start</strong> \u5373\u53EF\u3002\u73B0\u5728\u6211\u4EEC\u53EF\u4EE5\u4ECE\u5DE6\u4FA7\u9009\u62E9\u6211\u4EEC\u9700\u8981\u5206\u6790\u7684\u7C7B\uFF0C\u7136\u540E\u5728\u53F3\u4FA7\u5217\u51FA\u7684\u65B9\u6CD5\u4E0A\u53F3\u51FB\u5E76\u9009\u62E9 <strong>Show TriView</strong> \u5373\u53EF\u8FDB\u884C\u5206\u6790:</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213129088.png" alt="image-20221106213129088"></p><p>\u4ECE\u4E0B\u9762\u53EF\u4EE5\u770B\u5230\uFF0CJITWatch\u53EF\u4EE5\u540C\u65F6\u663E\u793A\u6E90\u7801\u3001\u5B57\u8282\u7801\u3001\u6C47\u7F16\uFF0C\u5927\u5927\u65B9\u4FBF\u4E86\u6211\u4EEC\u7684\u5206\u6790\u5DE5\u4F5C\uFF1A</p><p><img src="https://pixel-revolve.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213151138.png" alt="image-20221106213151138"></p><h1 id="\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u7ED3" aria-hidden="true">#</a> \u5C0F\u7ED3</h1><p>JITWatch\u7684\u5B89\u88C5\u8FD8\u7B97\u662F\u6BD4\u8F83\u9EBB\u70E6\u7684\uFF0C\u4E2D\u95F4\u8E29\u4E86\u597D\u591A\u5751\uFF0C\u7136\u540E\u7F51\u4E0A\u7684\u6587\u7AE0\u5927\u591A\u611F\u89C9\u4E0D\u662F\u5F88\u5168\uFF0C\u4E8E\u662F\u501F\u7740\u81EA\u5DF1\u505A\u6210\u529F\u4E86\u8BB0\u5F55\u4E00\u4E0B\uFF0C\u5E2E\u52A9\u4E00\u4E0B\u7814\u7A76\u6216\u9700\u8981\u8FD9\u4E2A\u4E1C\u897F\u7684\u4EBA\u3002</p><p>\u672C\u7AE0\u53C2\u8003\uFF1A</p><ul><li>https://www.cnblogs.com/stevenczp/p/7975776.html</li><li>https://blog.csdn.net/yizishou/article/details/53423409</li><li>https://blog.51cto.com/u_10486491/3216161</li><li>https://zhuanlan.zhihu.com/p/158168592</li></ul>`,101);function o(p,i){return n}var l=a(s,[["render",o],["__file","index.html.vue"]]);export{l as default};
